<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Click to Earn</title>
</head>
<body>

    <h1>Earn £0.50 per Click!</h1>
    <div>
        Balance: £<span id="balance">0.00</span>
    </div>

    <button id="earn-button">Add £0.50</button>
    <button id="cashout-button">Cashout</button>

    <script>
        let balance = 0.00;
        const balanceDisplay = document.getElementById("balance");
        const userPayPalEmail = 'yourpaypalemail@example.com'; // Your PayPal email

        // Event listener for the earning button
        document.getElementById("earn-button").addEventListener("click", function() {
            balance += 0.50; // Increase balance by 50p
            balanceDisplay.textContent = balance.toFixed(2); // Update balance display
        });

        // Event listener for the cashout button
        document.getElementById("cashout-button").addEventListener("click", async function() {
            if (balance > 0) {
                const confirmation = confirm(`Are you sure you want to cash out £${balance.toFixed(2)} to ${userPayPalEmail}?`);
                if (confirmation) {
                    const response = await fetch('/api/cashout', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            email: userPayPalEmail, // Use the user's PayPal email
                            amount: balance.toFixed(2) // Pass the current balance to cash out
                        })
                    });

                    const result = await response.json();
                    if (result.status === "success") {
                        alert(result.message);
                    } else {
                        alert("Cashout failed: " + result.message);
                    }

                    // Reset balance after cashout
                    balance = 0.00;
                    balanceDisplay.textContent = balance.toFixed(2);
                }
            } else {
                alert("Your balance is £0.00. Earn some money first!");
            }
        });
    </script>

</body>
</html>
